create database if not exists insurance_database;
show databases;
use insurance_database;
create table person ( driver_id varchar(10) primary key, name varchar(20), address varchar(20));
desc person;
create table car(reg_num varchar(10) primary key, model varchar(10), year int);
create table accident (report_num int primary key, accident_date date, location varchar (20));
create table owns(driver_id varchar(20) primary key, reg_num varchar(10), foreign key(driver_id) references person(driver_id), foreign key (reg_num) references car(reg_num));
CREATE TABLE participated(driver_id varchar(10),reg_num varchar(20),report_num int, damage_ammount int, primary key (driver_id, reg_num, report_num), foreign key(driver_id)references person (driver_id),foreign key(reg_num)references car(reg_num),foreign key(report_num)references accident (report_num));
insert into person values ("A01","Sagarmatha","kathmandu");
insert into person values ("A02","Saurav","biratnagar");
insert into person values ("A03","Sashwat","pokhara");
insert into person values ("A04","Sahil","butwal");
insert into person values ("A05","Sagar","budapest");
select * from person;
insert into car values ("KA777777","Koneigseig", 2025);
insert into car values ("KA0529639","McLaren", 2025);
insert into car values ("KA0147258","La Ferari", 2025);
insert into car values ("KA0789456","BMW", 2025);
insert into car values ("KA0123698","Bugati", 2025);
select * from car;
insert into owns values ("A01","KA777777");
insert into owns values ("A02","KA0529639");
insert into owns values ("A03","KA0147258");
insert into owns values ("A04","KA0789456");
insert into owns values ("A05","KA0123698");
select * from owns;
insert into accident values (11, "01-05-24","kathmandu");
insert into accident values (14, "12-08-25","paris");
insert into accident values (15, "23-10-22","pokhara");
insert into accident values (17, "30-12-21","milan");
insert into accident values (20, "19-02-19","budapest");
select * from accident;
update accident set report_num=12 where report_num= 14;
update accident set report_num=13 where report_num= 15;
update accident set report_num=14 where report_num= 17;
update accident set report_num=15 where report_num= 20;
select * from accident;
insert into participated values ("A01","KA777777", 11, 10000);
insert into participated values ("A02","KA0529639", 12, 50000);
insert into participated values ("A03","KA0147258", 13, 25000);
insert into participated values ("A04","KA0789456", 14, 3000);
insert into participated values ("A05","KA0123698", 15, 5000);
select * from participated;
show tables;
update participated set damage_ammount=25000 where reg_num= "KA0123698" and report_num=15;
commit;
select * from participated;
insert into accident values (16, "31-12-21","oslo");
select * from accident;
select accident_date,location from accident;
select driver_id from participated where damage_ammount>=25000;